---
layout: base.njk
---

{% set docsMenu = menu.docs | setActiveDocsPage(page) %}
{% set activeDocsPage = docsMenu | getActiveDocsPage %}

{# Layout Helper #}
<div class="-mt-8 sm:-mt-12 lg:-mt-16">
  {# Layout Helper #}
</div>

{# Search #}
<div class="fixed inset-0 mx-auto max-w-xl z-60 h-full flex items-center px-8" x-cloak x-show="docs.showSearch">
  <div id="docsSearch" class="h-4/5 max-h-[80vh] w-full" @click.outside="docs.closeSearch()">
    <div class="text-right">
      <button type="button" class="py-1 px-2 mb-4 border rounded-full text-xs bg-zinc-200" @click="docs.closeSearch()">
        <span class="sr-only">Press</span> ESC <span class="sr-only">to close</span>
      </button>
    </div>
  </div>
</div>

<div class="flex flex-col lg:flex-row lg:grow gap-8 lg:gap-12">

  <aside class="mx-auto w-full lg:w-[19rem] shrink-0 border-y lg:border-y-0 lg:border-r border-gray-900/10 lg:py-8 relative">

    {# Desktop menu #}
    <div class="hidden lg:block">
      <p class="text-2xl font-semibold mb-8">Knowledge Base</p>
      <div class="sticky top-8 z-10 lg:pr-8">
        <div class="pb-8">
          <button type="button"
                  class="select-none flex w-full gap-2 items-center px-3 py-2 border rounded-full text-sm bg-zinc-100 hover:bg-zinc-50 transition-all cursor-pointer"
                  @click="docs.openSearch()"
                  @mouseover="docs.loadAssets()">
            {% phicon "magnifying-glass", "regular", { class: "size-6"} %}
            <span>Quick search...</span>
            <span class="grow text-right text-xs" x-text="shortcuts.search">âŒ˜K</span>
          </button>
        </div>
      </div>

      {% for section in docsMenu %}
        {% if not section.draft %}
        <div class="mb-6 lg:pr-8">
          <p class="text-lg font-semibold mb-3">{{ section.title }}</p>
          <ul class="list-none m-0 p-0 border-l border-gray-900/5 space-y-2">
            {% for child in section.children %}
              {% if not child.draft %}
              <li>
                <a href="{{ child.url }}"
                   class="block pl-6 py-1 -ml-px border-l hover:border-current {% if child.active %}border-current text-red-600 font-semibold{% else %}border-transparent opacity-85 hover:opacity-100 !text-zinc-600{% endif %}">
                  {{ child.title }}
                </a>
              </li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>
        {% endif %}
      {% endfor %}

      <p class="prose text-xs opacity-75 mt-24 mb-0">
        Building something custom?<br/>
        Check the <a href="/developer-edition/docs/" class="">Developer Edition docs</a>.
      </p>

    </div>

    {# Mobile menu #}
    <div class="lg:hidden" x-cloak>

      <div class="fixed z-40 inset-y-0 left-0 w-80 max-w-[calc(100%-3rem)] bg-zinc-100 p-6 overflow-y-auto flex flex-col justify-between gap-16"
           x-show="docs.drawerMenuOpen"
           x-transition:enter="transition ease-out duration-200"
           x-transition:enter-start="opacity-0 -translate-x-40"
           x-transition:enter-end="opacity-100 translate-x-0"
           x-transition:leave="transition ease-in duration-150"
           x-transition:leave-start="opacity-100 translate-x-0"
           x-transition:leave-end="opacity-0 -translate-x-40"
           @click.outside="docs.toggleDrawerMenu()">
        <button type="button" class="absolute right-6 top-6 hover:text-red-600" @click="docs.toggleDrawerMenu()">
          <span class="sr-only">Close Navigation</span>
          {% phicon "x", "regular", { class: "size-6"} %}
        </button>

        <div class="space-y-6">
          {% for section in docsMenu %}
            {% if not section.draft %}
            <div class="">
              <p class="text-lg font-semibold mb-3">{{ section.title }}</p>
              <ul class="list-none m-0 p-0 border-l border-gray-900/5 space-y-2">
                {% for child in section.children %}
                  {% if not child.draft %}
                  <li>
                    <a href="{{ child.url }}"
                       class="block pl-6 py-1 -ml-px border-l hover:border-current {% if child.active %}border-current text-red-600 font-semibold{% else %}border-transparent opacity-85 hover:opacity-100 !text-zinc-600{% endif %}">
                      {{ child.title }}
                    </a>
                  </li>
                  {% endif %}
                {% endfor %}
              </ul>
            </div>
            {% endif %}
          {% endfor %}
        </div>

        <p class="prose text-xs opacity-75 my-0">
          Building something custom?<br/>
          Check the <a href="/developer-edition/docs/" class="">Developer Edition docs</a>.
        </p>

      </div>

      {# Breadcrumbs #}
      <div class="flex items-center p-4">
        <button type="button" class="hover:text-red-600" @click="docs.toggleDrawerMenu()">
          <span class="sr-only">Open Navigation</span>
          {% phicon "list", "regular", { class: "size-6" } %}
        </button>
        <ol class="mr-4 flex text-sm leading-6 whitespace-nowrap min-w-0" @click="docs.toggleDrawerMenu()">
          <li class="pl-4 flex items-center cursor-pointer font-semibold xs:font-normal">
            Knowledge Base
            {% phicon "caret-right", "regular", { class: "size-3 mx-3 hidden xs:block" } %}
          </li>
          <li class="items-center cursor-pointer hidden xs:flex font-semibold sm:font-normal">
            {{ activeDocsPage.sectionName or "Fruity" }}
            {% phicon "caret-right", "regular", { class: "size-3 mx-3 hidden sm:block" } %}
          </li>
          <li class="font-semibold hidden sm:block">{{ activeDocsPage.pageName or "Docs" }}</li>
        </ol>
        <button type="button"
                class="flex items-center ml-auto"
                @click="docs.openSearch()"
                @mouseover="docs.loadAssets()">
          {% phicon "magnifying-glass", "regular", { class: "size-6" } %}
          <span class="sr-only">Quick search...</span>
        </button>
      </div>

    </div>

  </aside>

  <main class="prose max-w-4xl mx-auto w-full lg:max-w-full grow py-8 min-w-0" data-pagefind-body>

    <header data-pagefind-meta="title:{{ activeDocsPage.sectionName }}: {{ activeDocsPage.pageName }}">
      {% if activeDocsPage.sectionName %}
        <p class="text-sm md:text-base font-semibold m-0 text-red-600 leading-none">{{ activeDocsPage.sectionName }}</p>
      {% endif %}
      <h1>{{ activeDocsPage.pageName or title }}</h1>
    </header>

    {{ content | safe }}

  </main>

</div>
